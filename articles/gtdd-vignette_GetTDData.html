<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="GetTDData">
<title>How to use GetTDData • GetTDData</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="How to use GetTDData">
<meta property="og:description" content="GetTDData">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">GetTDData</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/gtdd-vignette_GetTDData.html">How to use GetTDData</a>
    <a class="dropdown-item" href="../articles/gtdd-vignette_YieldCurve.html">Downloading the Current Yield Curve</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/msperlin/GetTDData/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>How to use GetTDData</h1>
                        <h4 data-toc-skip class="author">Marcelo
Perlin</h4>
            
            <h4 data-toc-skip class="date">2023-01-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/msperlin/GetTDData/blob/HEAD/vignettes/gtdd-vignette_GetTDData.Rmd" class="external-link"><code>vignettes/gtdd-vignette_GetTDData.Rmd</code></a></small>
      <div class="d-none name"><code>gtdd-vignette_GetTDData.Rmd</code></div>
    </div>

    
    
<p>Information regarding prices and yields of bonds issued by the
Brazilian government can be downloaded manually as excel files from the
<a href="https://www.tesourodireto.com.br/" class="external-link">Tesouro Direto website</a>.
However, it can be painful to aggregate all of this data into something
useful as the files don’t have an uniform format and are all divided by
year and asset code.</p>
<p>Package GetTDData makes the process of importing data from Tesouro
direto much easier. All you need is the name of fixed income assets
(LFT, LTN, NTN-C, NTN-B, NTN-B Principal, NTN-F).</p>
<div class="section level2">
<h2 id="how-to-use-gettddata">How to use GetTDData<a class="anchor" aria-label="anchor" href="#how-to-use-gettddata"></a>
</h2>
<p>Suppose you need financial data (prices and yields) for a bond of
type LTN with a maturity (end of contract) at 2023-01-01. This bullet
bond is the most basic debt contract the Brazilian government issues. It
does not pay any value (coupon) during its lifetime and will pay 1000 R$
at maturity.</p>
<p>In order to get the data, all you need to do is to run the following
code in R:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/msperlin/GetTDData/" class="external-link">GetTDData</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">asset.codes</span> <span class="op">&lt;-</span> <span class="st">'LTN'</span>   <span class="co"># Identifier of assets </span></span>
<span><span class="va">cache_folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'/TD_cache'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my.flag</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/download.TD.data.html">download.TD.data</a></span><span class="op">(</span>asset.codes <span class="op">=</span> <span class="va">asset.codes</span>, </span>
<span>                            dl.folder <span class="op">=</span> <span class="va">cache_folder</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning in download.TD.data(asset.codes = asset.codes, dl.folder =</span></span>
<span><span class="co">## cache_folder): Folder /tmp/RtmpRVKWp2/TD_cache was not found. Creating a it..</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2005.xls (1-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2006.xls (2-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2007.xls (3-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2008.xls (4-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2009.xls (5-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2010.xls (6-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2011.xls (7-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2012.xls (8-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2013.xls (9-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2014.xls (10-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2015.xls (11-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2016.xls (12-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2017.xls (13-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2018.xls (14-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2019.xls (15-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2020.xls (16-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2021.xls (17-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2022.xls (18-19) Downloading...</span></span>
<span><span class="co">## Downloading file /tmp/RtmpRVKWp2/TD_cache/LTN_2023.xls (19-19) Downloading...</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read.TD.files.html">read.TD.files</a></span><span class="op">(</span>dl.folder <span class="op">=</span> <span class="va">cache_folder</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Reading xls data and saving to data.frame</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2005.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 040105</span></span>
<span><span class="co">##     Reading Sheet LTN 010405</span></span>
<span><span class="co">##     Reading Sheet LTN 010705</span></span>
<span><span class="co">##     Reading Sheet LTN 011005</span></span>
<span><span class="co">##     Reading Sheet LTN 010106</span></span>
<span><span class="co">##     Reading Sheet LTN 010406</span></span>
<span><span class="co">##     Reading Sheet LTN 010706</span></span>
<span><span class="co">##     Reading Sheet LTN 011006</span></span>
<span><span class="co">##     Reading Sheet LTN 010107</span></span>
<span><span class="co">##     Reading Sheet LTN 010407</span></span>
<span><span class="co">##     Reading Sheet LTN 010707</span></span>
<span><span class="co">##     Reading Sheet LTN 010108</span></span>
<span><span class="co">##     Reading Sheet LTN 010708</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2006.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010406</span></span>
<span><span class="co">##     Reading Sheet LTN 010706</span></span>
<span><span class="co">##     Reading Sheet LTN 011006</span></span>
<span><span class="co">##     Reading Sheet LTN 010107</span></span>
<span><span class="co">##     Reading Sheet LTN 010407</span></span>
<span><span class="co">##     Reading Sheet LTN 010707</span></span>
<span><span class="co">##     Reading Sheet LTN 011007</span></span>
<span><span class="co">##     Reading Sheet LTN 010108</span></span>
<span><span class="co">##     Reading Sheet LTN 010408</span></span>
<span><span class="co">##     Reading Sheet LTN 010708</span></span>
<span><span class="co">##     Reading Sheet LTN 010109</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2007.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010407</span></span>
<span><span class="co">##     Reading Sheet LTN 010707</span></span>
<span><span class="co">##     Reading Sheet LTN 011007</span></span>
<span><span class="co">##     Reading Sheet LTN 010108</span></span>
<span><span class="co">##     Reading Sheet LTN 010408</span></span>
<span><span class="co">##     Reading Sheet LTN 010708</span></span>
<span><span class="co">##     Reading Sheet LTN 011008</span></span>
<span><span class="co">##     Reading Sheet LTN 010109</span></span>
<span><span class="co">##     Reading Sheet LTN 010709</span></span>
<span><span class="co">##     Reading Sheet LTN 011009</span></span>
<span><span class="co">##     Reading Sheet LTN 010110</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2008.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010408</span></span>
<span><span class="co">##     Reading Sheet LTN 010708</span></span>
<span><span class="co">##     Reading Sheet LTN 011008</span></span>
<span><span class="co">##     Reading Sheet LTN 010109</span></span>
<span><span class="co">##     Reading Sheet LTN 010409</span></span>
<span><span class="co">##     Reading Sheet LTN 010709</span></span>
<span><span class="co">##     Reading Sheet LTN 011009</span></span>
<span><span class="co">##     Reading Sheet LTN 010110</span></span>
<span><span class="co">##     Reading Sheet LTN 010710</span></span>
<span><span class="co">##     Reading Sheet LTN 010111</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2009.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010409</span></span>
<span><span class="co">##     Reading Sheet LTN 010709</span></span>
<span><span class="co">##     Reading Sheet LTN 011009</span></span>
<span><span class="co">##     Reading Sheet LTN 010110</span></span>
<span><span class="co">##     Reading Sheet LTN 010710</span></span>
<span><span class="co">##     Reading Sheet LTN 010111</span></span>
<span><span class="co">##     Reading Sheet LTN 010112</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2010.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010710</span></span>
<span><span class="co">##     Reading Sheet LTN 010111</span></span>
<span><span class="co">##     Reading Sheet LTN 010711</span></span>
<span><span class="co">##     Reading Sheet LTN 010112</span></span>
<span><span class="co">##     Reading Sheet LTN 010113</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2011.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010711</span></span>
<span><span class="co">##     Reading Sheet LTN 010112</span></span>
<span><span class="co">##     Reading Sheet LTN 010113</span></span>
<span><span class="co">##     Reading Sheet LTN 010114</span></span>
<span><span class="co">##     Reading Sheet LTN 010115</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2012.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010113</span></span>
<span><span class="co">##     Reading Sheet LTN 010114</span></span>
<span><span class="co">##     Reading Sheet LTN 010115</span></span>
<span><span class="co">##     Reading Sheet LTN 010116</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2013.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010114</span></span>
<span><span class="co">##     Reading Sheet LTN 010115</span></span>
<span><span class="co">##     Reading Sheet LTN 010116</span></span>
<span><span class="co">##     Reading Sheet LTN 010117</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2014.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010115</span></span>
<span><span class="co">##     Reading Sheet LTN 010116</span></span>
<span><span class="co">##     Reading Sheet LTN 010117</span></span>
<span><span class="co">##     Reading Sheet LTN 010118</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2015.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010116</span></span>
<span><span class="co">##     Reading Sheet LTN 010117</span></span>
<span><span class="co">##     Reading Sheet LTN 010118</span></span>
<span><span class="co">##     Reading Sheet LTN 010121</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2016.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010117</span></span>
<span><span class="co">##     Reading Sheet LTN 010118</span></span>
<span><span class="co">##     Reading Sheet LTN 010119</span></span>
<span><span class="co">##     Reading Sheet LTN 010121</span></span>
<span><span class="co">##     Reading Sheet LTN 010123</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2017.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010118</span></span>
<span><span class="co">##     Reading Sheet LTN 010119</span></span>
<span><span class="co">##     Reading Sheet LTN 010120</span></span>
<span><span class="co">##     Reading Sheet LTN 010121</span></span>
<span><span class="co">##     Reading Sheet LTN 010123</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2018.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010119</span></span>
<span><span class="co">##     Reading Sheet LTN 010120</span></span>
<span><span class="co">##     Reading Sheet LTN 010121</span></span>
<span><span class="co">##     Reading Sheet LTN 010123</span></span>
<span><span class="co">##     Reading Sheet LTN 010125</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2019.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010120</span></span>
<span><span class="co">##     Reading Sheet LTN 010121</span></span>
<span><span class="co">##     Reading Sheet LTN 010122</span></span>
<span><span class="co">##     Reading Sheet LTN 010123</span></span>
<span><span class="co">##     Reading Sheet LTN 010125</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2020.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010121</span></span>
<span><span class="co">##     Reading Sheet LTN 010122</span></span>
<span><span class="co">##     Reading Sheet LTN 010123</span></span>
<span><span class="co">##     Reading Sheet LTN 010125</span></span>
<span><span class="co">##     Reading Sheet LTN 010126</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2021.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010122</span></span>
<span><span class="co">##     Reading Sheet LTN 010123</span></span>
<span><span class="co">##     Reading Sheet LTN 010724</span></span>
<span><span class="co">##     Reading Sheet LTN 010125</span></span>
<span><span class="co">##     Reading Sheet LTN 010126</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2022.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010123</span></span>
<span><span class="co">##     Reading Sheet LTN 010724</span></span>
<span><span class="co">##     Reading Sheet LTN 010125</span></span>
<span><span class="co">##     Reading Sheet LTN 010126</span></span>
<span><span class="co">##     Reading Sheet LTN 010129</span></span>
<span><span class="co">##  Reading File = /tmp/RtmpRVKWp2/TD_cache/LTN_2023.xls</span></span>
<span><span class="co">##     Reading Sheet LTN 010724</span></span>
<span><span class="co">##     Reading Sheet LTN 010125</span></span>
<span><span class="co">##     Reading Sheet LTN 010126</span></span>
<span><span class="co">##     Reading Sheet LTN 010129</span></span></code></pre>
<p>Let’s plot the prices to check if the code worked:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'dplyr'</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:stats':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     filter, lag</span></span></code></pre>
<pre><code><span><span class="co">## The following objects are masked from 'package:base':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     intersect, setdiff, setequal, union</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># filter  LTN </span></span>
<span><span class="va">my_asset_code</span> <span class="op">&lt;-</span> <span class="st">"LTN 010123"</span></span>
<span><span class="va">first_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2015-01-01"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">my.df</span> <span class="op">&lt;-</span> <span class="va">my.df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ref.date</span> <span class="op">&gt;=</span> <span class="va">first_date</span><span class="op">)</span></span>
<span></span>
<span><span class="va">LTN</span> <span class="op">&lt;-</span> <span class="va">my.df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">asset.code</span>  <span class="op">==</span>  <span class="va">my_asset_code</span>,</span>
<span>         <span class="va">ref.date</span> <span class="op">&gt;=</span> <span class="va">first_date</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">LTN</span>, </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">ref.date</span><span class="op">)</span>, </span>
<span>                y <span class="op">=</span> <span class="va">price.bid</span>, </span>
<span>                color <span class="op">=</span> <span class="va">asset.code</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">''</span>, x <span class="op">=</span> <span class="st">'Dates'</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Please use `linewidth` instead.</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<p><img src="gtdd-vignette_GetTDData_files/figure-html/plot.prices-1.png" width="672"></p>
<p>As expected, the prices from this bond will converge to its face
value, 1000 R$, at the maturity date. We can also look at its
time-varying annual yield:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">LTN</span>, </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">ref.date</span><span class="op">)</span>, </span>
<span>                y <span class="op">=</span> <span class="va">yield.bid</span>, </span>
<span>                color <span class="op">=</span> <span class="va">asset.code</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">''</span>, </span>
<span>       x <span class="op">=</span> <span class="st">'Dates'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<p><img src="gtdd-vignette_GetTDData_files/figure-html/plot.yield-1.png" width="672"></p>
<p>By default, <code>GetTDData</code> downloads all available data from
the website. Suppose we wanted to look at the prices of all available
maturities for bonds of type LTN. Since the data is already downloaded,
all we need to do is to plot the prices and yields of the different debt
contracts:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot data (prices)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">my.df</span>, </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">ref.date</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">price.bid</span>, color <span class="op">=</span> <span class="va">asset.code</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">''</span>, x <span class="op">=</span> <span class="st">'Dates'</span>, y <span class="op">=</span> <span class="st">'Prices'</span> <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<p><img src="gtdd-vignette_GetTDData_files/figure-html/example2_plots-1.png" width="672"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot data (yields)</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">my.df</span>, </span>
<span>            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">ref.date</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">yield.bid</span>, color <span class="op">=</span> <span class="va">asset.code</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">''</span>, x <span class="op">=</span> <span class="st">'Dates'</span>, y <span class="op">=</span> <span class="st">'Yields'</span> <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span></code></pre></div>
<p><img src="gtdd-vignette_GetTDData_files/figure-html/example2_plots-2.png" width="672"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Marcelo Perlin.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
